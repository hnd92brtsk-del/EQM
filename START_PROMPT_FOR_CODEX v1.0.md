### **üîπ START PROMPT FOR CODEX üîπ**

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:**  
 –Ø —Ä–∞–±–æ—Ç–∞—é –Ω–∞ Windows 10 (22H2).  
 –£ –º–µ–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PostgreSQL 16.3, Python 3.12.10, Node.js 24.12.0, npm 11.6.2.  
 –Ø –∏—Å–ø–æ–ª—å–∑—É—é VSCode.  
 –í –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –µ—Å—Ç—å —Ñ–∞–π–ª `Architecture.md` ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–µ –¢–ó –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞.

---

## **üéØ –ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å**

–°–æ–∑–¥–∞–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–µ–µ web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (backend \+ frontend \+ database), –∫–æ—Ç–æ—Ä–æ–µ —è —Å–º–æ–≥—É –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ **–±–µ–∑ Docker**, –≤—ã–ø–æ–ª–Ω–∏–≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ README.

–ü—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω:

* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Ç—å PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;

* –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É –ë–î —á–µ—Ä–µ–∑ Alembic;

* –∑–∞–ø–æ–ª–Ω–∏—Ç—å seed-–¥–∞–Ω–Ω—ã–µ;

* –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (backend \+ frontend);

* –ø–æ–∑–≤–æ–ª–∏—Ç—å –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –ø–æ–¥ admin –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å UI.

---

## **A. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ë–î (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)**

### **A1. –°–æ–∑–¥–∞–π Python-—Å–∫—Ä–∏–ø—Ç:**

`backend/scripts/create_database.py`

–°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω:

1. –ü–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ PostgreSQL –ø–æ–¥ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (`postgres`):

   * host: `localhost`

   * port: `5432`

   * user: `postgres`

   * –ø–∞—Ä–æ–ª—å –±—Ä–∞—Ç—å –∏–∑ env `POSTGRES_SUPERUSER_PASSWORD`

2. –°–æ–∑–¥–∞–≤–∞—Ç—å (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç):

   * –ë–î: `equipment_crm`

   * –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `equipment_user`

   * –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –∏–∑ env `DB_PASSWORD`

3. –ù–∞–∑–Ω–∞—á–∞—Ç—å –ø—Ä–∞–≤–∞:

   * `equipment_user` ‚Äî owner –±–∞–∑—ã `equipment_crm`

4. –ë—ã—Ç—å **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º**:

   * –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫

5. –í—ã–≤–æ–¥–∏—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å:

   * ‚ÄúDatabase already exists‚Äù

   * ‚ÄúUser created‚Äù

   * ‚ÄúPrivileges granted‚Äù

---

### **A2. –î–æ–±–∞–≤—å `.env.example` –¥–ª—è backend:**

`DB_HOST=localhost`  
`DB_PORT=5432`  
`DB_NAME=equipment_crm`  
`DB_USER=equipment_user`  
`DB_PASSWORD=change_me`  
`POSTGRES_SUPERUSER_PASSWORD=postgres_password_here`

`JWT_SECRET=change_me`  
`JWT_ALGORITHM=HS256`  
`JWT_EXPIRE_MINUTES=5`  
`ENV=development`  
`UPLOAD_DIR=uploads`

---

### **A3. Backend –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û SQLAlchemy \+ Alembic**

* –ó–∞–ø—Ä–µ—â–µ–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤—Ä—É—á–Ω—É—é SQL-—Å–∫—Ä–∏–ø—Ç–∞–º–∏.

* –í—Å—è —Å—Ö–µ–º–∞ –ë–î —Å–æ–∑–¥–∞—ë—Ç—Å—è:

  1. Alembic migration (`0001_initial`)

  2. `alembic upgrade head`

---

## **B. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç–µ–∫ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)**

### **Backend**

* FastAPI

* SQLAlchemy 2.x

* Alembic

* Pydantic v2

* JWT auth (–ø—Ä–æ—Å—Ç–∞—è —Å—Ö–µ–º–∞):

  * `POST /api/v1/auth/login`

  * `Authorization: Bearer <token>`

  * token expiration \= 5 –º–∏–Ω—É—Ç

* RBAC:

  * admin / engineer / viewer

* –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π –∏–∑ `Architecture.md`

### **Frontend**

* Vite

* React \+ TypeScript

* MUI (Material UI)

* TanStack Query

* TanStack Table

* Recharts

* Role-based UI (viewer ‚Äî read-only)

---

## **C. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—Å—Ç—Ä–æ–≥–æ)**

1. –†–µ–∞–ª–∏–∑—É–π –¥–≤–∏–∂–µ–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:

   * inbound

   * transfer

   * to\_cabinet

   * from\_cabinet

   * **direct\_to\_cabinet**

   * writeoff

   * adjustment

2. `direct_to_cabinet`:

   * –¥–æ–±–∞–≤–ª—è–µ—Ç –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –≤ —à–∫–∞—Ñ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ `equipment_types`

   * **–Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç —Å–∫–ª–∞–¥**

3. Cabinet items –∏ Warehouse items –∏–∑–º–µ–Ω—è—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ movements**.

4. –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `audit_logs`.

---

## **D. Frontend UX (–∫—Ä–∏—Ç–∏—á–Ω–æ)**

1. –í Cabinet Items:

   * –∫–Ω–æ–ø–∫–∞ ‚Äú+ –î–æ–±–∞–≤–∏—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ‚Äù

   * –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º:

     * ‚Äú–°–æ —Å–∫–ª–∞–¥–∞‚Äù

     * ‚Äú–ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —à–∫–∞—Ñ‚Äù

2. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ ‚Äú–°–æ —Å–∫–ª–∞–¥–∞‚Äù:

   * –ø–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫

   * –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –≤–≤–æ–¥ quantity –±–æ–ª—å—à–µ available

3. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ ‚Äú–ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ‚Äù:

   * —Å–∫–ª–∞–¥ —Å–∫—Ä—ã—Ç

   * —Ç–æ–ª—å–∫–æ equipment\_type \+ quantity

4. UI –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏–∫–µ –∏–∑ `Architecture.md`.

---

## **E. Alembic \+ Seed**

1. –°–æ–∑–¥–∞–π `backend/alembic`:

   * `env.py`

   * `versions/0001_initial.py`

2. Seed-—Å–∫—Ä–∏–ø—Ç `backend/scripts/seed.py`:

   * admin / admin12345

   * Siemens

   * Warehouse ‚Äú–°–∫–ª–∞–¥ 1‚Äù

   * EquipmentType `PLC-001` —Å `unit_price_rub`

---

## **F. README (–æ—á–µ–Ω—å –≤–∞–∂–Ω–æ)**

–í `README.md` –æ–ø–∏—à–∏ **–ü–û–®–ê–ì–û–í–û –¥–ª—è Windows PowerShell**:

1. –°–æ–∑–¥–∞–Ω–∏–µ venv

2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–°–æ–∑–¥–∞–Ω–∏–µ –ë–î:

 `python backend/scripts/create_database.py`

3. 

Alembic:

 `alembic upgrade head`

4. 

Seed:

 `python backend/scripts/seed.py`

5. 

–ó–∞–ø—É—Å–∫ backend:

 `uvicorn app.main:app --reload`

6. 

–ó–∞–ø—É—Å–∫ frontend:

 `npm install`  
`npm run dev`

7. 

---

## **G. –ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**

–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, –µ—Å–ª–∏:

* –ë–î —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

* Alembic —Å–æ–∑–¥–∞—ë—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã

* Seed –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

* Backend –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8000`

* Frontend –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:5173`

* –Ø –º–æ–≥—É:

  * –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è admin/admin12345

  * –æ—Ç–∫—Ä—ã—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

  * –¥–æ–±–∞–≤–∏—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –≤ —à–∫–∞—Ñ **–Ω–∞–ø—Ä—è–º—É—é**

  * –¥–æ–±–∞–≤–∏—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ **—Å–æ —Å–∫–ª–∞–¥–∞** (–µ—Å–ª–∏ –µ—Å—Ç—å –æ—Å—Ç–∞—Ç–∫–∏)

**–ù–∞—á–∏–Ω–∞–π —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ñ–∞–π–ª–æ–≤. –î–µ–ª–∞–π –∫–æ–¥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–º –¥–ª—è –Ω–æ–≤–∏—á–∫–∞.**

---

### **üîπ END PROMPT üîπ**

